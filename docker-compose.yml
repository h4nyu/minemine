version: '2.4'

x-app: &app
    image: "${DOCKER_REGISTRY}/mine/mine"
    shm_size: '30gb'
    working_dir: /srv
    volumes:
      - .:/srv
    runtime: nvidia
    restart: always


services:
  eth:
    <<: *app
    environment:
      - WORKER_NAME
      - ETH_POOL
      - ETH_WALLET
    command: ethminer -P stratum1+tcp://$ETH_WALLET.$WORKER_NAME@$ETH_POOL

    
